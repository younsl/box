## 개요

ElastiCache for Valkey 클러스터에서 CVE-2025-49844 보안 취약점을 해결하기 위한 실무 가이드입니다. AWS ElastiCache는 외부 Redis 버전과 직접 매칭되지 않으며, 마이너 버전 업그레이드 대신 백포트 패치 방식을 사용하여 엔진 버전을 유지한 채로 보안 패치를 적용합니다. 이 문서에서는 `elasticache-october-patch-update-202510`과 `elasticache-october-patch-update-2-202510` 두 개의 서비스 업데이트를 순차적으로 적용하는 방법을 AWS CLI 명령어 예제와 함께 제공합니다.

## 취약점 조치 방법

### ElastiCache 클러스터 조회

```bash
aws elasticache describe-replication-groups \
  --query 'ReplicationGroups[*].[ReplicationGroupId,Engine,EngineVersion]' \
  --output table
```

### 서비스 업데이트 조회

먼저 적용 가능한 서비스 업데이트 목록을 확인합니다:

```bash
aws elasticache describe-service-updates \
  --service-update-status available \
  --query 'ServiceUpdates[*].[ServiceUpdateName,ServiceUpdateType]' \
  --output text
```

```bash
elasticache-october-patch-update-2-202510       engine-update
elasticache-october-patch-update-202510 engine-update
# ... omitted for brevity ...
```

### 서비스 업데이트 적용

ElastiCache 팀 서포트 답변에 따르면 [CVE-2025-49844](https://www.cve.org/CVERecord?id=CVE-2025-49844) 취약점을 해결하려면 아래 2개 서비스 업데이트를 적용합니다.

- elasticache-october-patch-update-202510
- elasticache-october-patch-update-2-202510

우선 AWS 의 ElastiCache의 경우에 해당 외부의 Redis의 버전과 동일하게 매칭이 되지는 않습니다. AWS 에서의 관리되는 Redis의 경우에 패치가 이루어지는 마이너 버전의 경우에 이를 버전 업그레이드를 하는 방식이 아닌 내부적으로 백포트 패치로 진행하고 있습니다. 따라서 ElastiCache 엔진 버전을 유지한 채로 패치가 진행된다는 특성이 있습니다.

```bash
aws elasticache batch-apply-update-action \
  --service-update-name elasticache-october-patch-update-202510 \
  --replication-group-ids my-cluster-dev my-cluster-stage
```

서비스 업데이트는 하나씩 적용 가능하므로, elasticache-october-patch-update-202510가 완료된 이후에 elasticache-october-patch-update-2-202510 서비스 업데이트를 이어서 실행합니다.

```bash
aws elasticache batch-apply-update-action \
  --service-update-name elasticache-october-patch-update-2-202510 \
  --replication-group-ids my-cluster-dev my-cluster-stage
```
